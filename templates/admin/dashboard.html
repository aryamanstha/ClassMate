{% extends "admin/base.html" %}
{% block admin_content %}

<div class="admin-header">
  <div>
    <h1><i class="bi bi-speedometer2"></i> Dashboard</h1>
    <p class="text-muted mb-0">Welcome to the ClassMate Admin Panel</p>
  </div>
</div>

<!-- Statistics Cards -->
<div class="stats-grid">
  <div class="stat-card">
    <h6><i class="bi bi-person-plus"></i> Pending Approvals</h6>
    <p class="stat-number">{{ pending_instructors_count }}</p>
  </div>

  <div class="stat-card" style="border-left-color: #27ae60;">
    <h6><i class="bi bi-people"></i> Total Students</h6>
    <p class="stat-number">{{ total_students }}</p>
  </div>

  <div class="stat-card" style="border-left-color: #e74c3c;">
    <h6><i class="bi bi-person-badge"></i> Total Instructors</h6>
    <p class="stat-number">{{ total_instructors }}</p>
  </div>

  <div class="stat-card" style="border-left-color: #f39c12;">
    <h6><i class="bi bi-book"></i> Total Courses</h6>
    <p class="stat-number">{{ total_courses }}</p>
  </div>

  <div class="stat-card" style="border-left-color: #9b59b6;">
    <h6><i class="bi bi-columns-gap"></i> Total Sections</h6>
    <p class="stat-number">{{ total_sections }}</p>
  </div>
</div>

<!-- Pending Instructor Approvals -->
<div class="detail-section">
  <h4><i class="bi bi-check-circle"></i> Pending Instructor Approvals</h4>
  
  {% if pending_instructors %}
    <div class="table-wrapper">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Instructor Name</th>
            <th>Email</th>
            <th>Department</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for ia in pending_instructors %}
          <tr>
            <td>
              <strong>{{ ia.instructor.name }}</strong><br>
              <small class="text-muted">ID: {{ ia.instructor.instructor_id }}</small>
            </td>
            <td>{{ ia.instructor.email }}</td>
            <td>{{ ia.instructor.department }}</td>
            <td>
              <span class="badge bg-warning text-dark">Pending</span>
            </td>
            <td>
              <div class="action-buttons">
                <a href="{% url 'admin_approve_instructor' ia.id %}" class="btn btn-success btn-sm">
                  <i class="bi bi-check"></i> Approve
                </a>
                <a href="{% url 'admin_reject_instructor' ia.id %}" class="btn btn-danger btn-sm"
                   onclick="return confirm('Are you sure you want to reject this instructor?');">
                  <i class="bi bi-x"></i> Reject
                </a>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <p class="mt-3">
      <a href="{% url 'admin_instructor_approvals' %}" class="btn btn-primary">
        View All Approvals <i class="bi bi-arrow-right"></i>
      </a>
    </p>
  {% else %}
    <p class="text-muted">No pending instructor approvals.</p>
  {% endif %}
</div>

{% endblock %}
